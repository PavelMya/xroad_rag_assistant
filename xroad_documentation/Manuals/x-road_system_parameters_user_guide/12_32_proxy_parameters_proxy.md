### 3.2 Proxy parameters: `[proxy]`

| **Parameter**                                        | **Default value**                   | **FI-package value** | **EE-package value** | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------|-------------------------------------|----------------------|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| client-http-port                                     | 8080                                |                      | 80                   | TCP port on which the service client's security server listens for HTTP requests from client applications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| client-https-port                                    | 8443                                |                      | 443                  | TCP port on which the service client's security server listens for HTTPS requests from client applications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| client-timeout                                       | 30000                               |                      |                      | Defines the time period (in milliseconds), for which the service client's security server tries to connect to the service provider's security server. When the timeout is reached, the service client's security server informs the service client's information system that a service timeout has occurred.                                                                                                                                                                                                                                                                         |
| configuration-anchor-file                            | /etc/xroad/configuration-anchor.xml |                      |                      | Absolute file name of the configuration anchor that is used to download global configuration.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| connector-host                                       | 0.0.0.0                             |                      | 127.0.0.1            | IP address on which the service client's security server listens for connections from client applications. The value 0.0.0.0 allows listening on all IPv4 interfaces. The value 127.0.0.1 allows listening on localhost only. **NB!** Changing this value could make your Security Server externally accessible and as such, a firewall rules should be implemented first to limit access to trusted hosts.                                                                                                                                                                          |
| database-properties                                  | /etc/xroad/db.properties            |                      |                      | Absolute file name of the properties file for the configuration of the security server database.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ocsp-responder-listen-address                        | 0.0.0.0                             |                      |                      | IP address on which the service provider's security server listens for requests for OCSP responses from the service client's security server. The service client's security server downloads OCSP responses from the service provider's security server while establishing a secure connection between the security servers. The value 0.0.0.0 allows listening on all IPv4 interfaces. Must match the value of proxy.server-listen-address.                                                                                                                                         |
| ocsp-responder-port                                  | 5577                                |                      |                      | TCP port on which the service provider's security server listens for requests for OCSP responses from the service client's security server. The service client's security server downloads OCSP responses from the service provider's security server while establishing a secure connection between the security servers.                                                                                                                                                                                                                                                           |
| ocsp-responder-client-connect-timeout                | 20000                               |                      |                      | Connect timeout (in milliseconds) of the OCSP responder client. The service client's security server downloads OCSP responses from the service provider's security server while establishing a secure connection between the security servers.                                                                                                                                                                                                                                                                                                                                       |
| ocsp-responder-client-read-timeout                   | 30000                               |                      |                      | Read timeout (in milliseconds) of the OCSP responder client. The service client's security server downloads OCSP responses from the service provider's security server while establishing a secure connection between the security servers.                                                                                                                                                                                                                                                                                                                                          |
| server-listen-address                                | 0.0.0.0                             |                      |                      | IP address on which the service provider's security server listens for connections from the service client's security servers. The value 0.0.0.0 allows listening on all IPv4 interfaces.                                                                                                                                                                                                                                                                                                                                                                                            |
| server-listen-port                                   | 5500                                |                      |                      | TCP port on which the service provider's security server listens for connections from the service client's security server.                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| server-port                                          | 5500                                |                      |                      | Destination TCP port for outgoing queries in the service client's security server.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| jetty-clientproxy-configuration-file                 | /etc/xroad/jetty/clientproxy.xml    |                      |                      | Absolute filename of the Jetty configuration file for the service client's security server. For more information about configuring Jetty server, see https://www.eclipse.org/jetty/documentation/jetty-9/index.html.                                                                                                                                                                                                                                                                                                                                                                 |
| jetty-serverproxy-configuration-file                 | /etc/xroad/jetty/serverproxy.xml    |                      |                      | Absolute filename of the Jetty configuration file for the service provider's security server. For more information about configuring Jetty server, see https://www.eclipse.org/jetty/documentation/jetty-9/index.html.                                                                                                                                                                                                                                                                                                                                                               |
| jetty-ocsp-responder-configuration-file              | /etc/xroad/jetty/ocsp-responder.xml |                      |                      | Absolute filename of the Jetty configuration file for the OCSP responder of the service provider's security server. For more information about configuring Jetty server, see https://www.eclipse.org/jetty/documentation/jetty-9/index.html.                                                                                                                                                                                                                                                                                                                                         |
| ssl-enabled                                          | true                                |                      |                      | If true, TLS is used for connections between the service client's and service provider's security servers.                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| client-tls-ciphers                                   | See [1](#Ref_note1)                 |                      |                      | TLS ciphers (comma-separated list) enabled on the client-side interfaces (for both incoming and outgoing requests). (since version 6.7)                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| xroad-tls-ciphers                                    | See [2](#Ref_note2)                 |                      |                      | TLS ciphers (comma-separated list in preferred order) accepted on requests between security servers, and between operational monitoring daemon and client. (since version 6.20)                                                                                                                                                                                                                                                                                                                                                                                                      |
| client-tls-protocols                                 | TLSv1.2                             |                      |                      | TLS protocols (comma-separated list) enabled on the client-side interfaces (for both incoming and outgoing requests). For backward compatibility TLSv1.1 is still supported on the client-side interfaces for outgoing requests (since version 6.7)                                                                                                                                                                                                                                                                                                                                  |
| server-connector-initial-idle-time                   | 30000                               |                      |                      | The initial idle time (in milliseconds) that unauthenticated connections are allowed to be idle before the provider security server starts closing them. Value of 0 means that an infinite idle time is allowed.                                                                                                                                                                                                                                                                                                                                                                     | 
| server-connector-max-idle-time                       | 0                                   | 120000               |                      | The maximum time (in milliseconds) that connections from a service consuming security server to a service providing security server are allowed to be idle before the provider security server starts closing them. Value of 0 means that an infinite idle time is allowed. A non-zero value should allow some time for a pooled connection to be idle, if  pooled connections are to be supported.                                                                                                                                                                                  |
| server-connector-so-linger                           | -1                                  |                      |                      | The SO_LINGER time (in seconds) at the service providing security server end for connections between security servers.A value larger than 0 means that upon closing a connection, the system will allow SO_LINGER seconds for the transmission and acknowledgement of all data written to the peer, at which point the socket is closed gracefully. Upon reaching the linger timeout, the socket is closed forcefully, with a TCP RST. Enabling the option with a timeout of zero does a forceful close immediately.Value of -1 disables the forceful close.                 |
| server-support-clients-pooled-connections            | false                               | true                 |                      | Whether this service providing security server supports pooled connections from the service consumer side. If set to *false*, connections are to be closed immediately after each message. This may be a wanted approached for security servers behind load balancers.                                                                                                                                                                                                                                                                                                               |
| client-connector-initial-idle-time                   | 30000                               |                      |                      | The initial idle time (in milliseconds) that client connections are allowed to be idle before the security server starts closing them. Value of 0 means that an infinite idle time is allowed.                                                                                                                                                                                                                                                                                                                                                                                       |
| client-connector-max-idle-time                       | 0                                   |                      |                      | The maximum time (in milliseconds) that connections from a service consumer to the service consumer's security server are allowed to be idle before the security server starts closing them. Value of 0 means that an infinite idle time is allowed.                                                                                                                                                                                                                                                                                                                                 |
| client-connector-so-linger                           | -1                                  |                      |                      | The SO_LINGER time (in seconds) at the service consuming security server end for connections between a consumer and a security server.A value larger than 0 means that upon closing a connection, the system will allow SO_LINGER seconds for the transmission and acknowledgement of all data written to the peer, at which point the socket is closed gracefully. Upon reaching the linger timeout, the socket is closed forcefully, with a TCP RST. Enabling the option with a timeout of zero does a forceful close immediately.Value of -1 disables the forceful close. |
| client-httpclient-timeout                            | 0                                   |                      |                      | The maximum time (SO_TIMEOUT, in milliseconds) that connections from a service consuming security server to a service providing security server are allowed to wait for a response before the consumer end httpclient gives up. Value of 0 means that an infinite wait time is allowed. This does not affect idle connections.                                                                                                                                                                                                                                                       |
| client-httpclient-so-linger                          | -1                                  |                      |                      | The SO_LINGER time (in seconds) at the service consuming security server end for connections between security servers.A value larger than 0 means that upon closing a connection, the system will allow SO_LINGER seconds for the transmission and acknowledgement of all data written to the peer, at which point the socket is closed gracefully. Upon reaching the linger timeout, the socket is closed forcefully, with a TCP RST. Enabling the option with a timeout of zero does a forceful close immediately.Value of -1 disables the forceful close.                 |
| client-use-idle-connection-monitor                   | true                                |                      |                      | Should the idle connection monitor be used to clean up idle and expired connections from the connection pool.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| client-idle-connection-monitor-interval              | 30000                               |                      |                      | How often (in milliseconds) should the connection monitor go through the pooled connections to see if it can clean up any idle or expired connections. This option requires the connection monitor to be enabled to have any effect.                                                                                                                                                                                                                                                                                                                                                 |
| client-idle-connection-monitor-timeout               | 60000                               |                      |                      | The minimum time (in milliseconds) that a pooled connection must be unused (idle) before it can be removed from the pool. Note that removal from the pool also depends on how often the connection monitor runs. This option requires the connection monitor to be enabled to have any effect.                                                                                                                                                                                                                                                                                       |
| pool-total-max-connections                           | 10000                               |                      |                      | The total maximum number of connections that are allowed in the pool.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| pool-total-default-max-connections-per-route         | 2500                                |                      |                      | The default route specific connection maximum that is set unless a route specific connection limit is set. Due to the current implementation, this is actually the total maximum limit of connections, indepedent of what the above setting is.                                                                                                                                                                                                                                                                                                                                      |
| pool-validate-connections-after-inactivity-of-millis | 2000                                |                      |                      | When reusing a pooled connection to a service providing security server, check that the connection (the socket) is not half-closed if it has been idle for at least this many milliseconds. This method cannot detect half-open connections. Value of -1 disables the check.                                                                                                                                                                                                                                                                                                         |
| pool-enable-connection-reuse                         | false                               | true                 |                      | Allow pooled connections between security servers to be used more than once on the client side. The service provider end of the connections has to have the setting `server-support-clients-pooled-connections=true` for the pooling to work between a provider and consumer security servers.                                                                                                                                                                                                                                                                                       |
| client-use-fastest-connecting-ssl-socket-autoclose   | true                                |                      |                      | On TLS connections between security servers, should the underlying TCP-layer connection (socket) be closed on the service consumer end when the TLS layer connection is terminated.                                                                                                                                                                                                                                                                                                                                                                                                  |
| client-fastest-connecting-ssl-uri-cache-period       | 3600                                |                      |                      | When a service consumer's security server finds the fastest responding service providing security server, how long the result should be kept in the TLS session cache? 0 to disable.                                                                                                                                                                                                                                                                                                                                                                                                 |
| health-check-port                                    | 0 (disabled)                        |                      |                      | The TCP port where the health check service listens to requests. Setting the port to 0 disables the health check service completely.                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| health-check-interface                               | 0.0.0.0                             |                      |                      | The network interface where the health check service listens to requests. Default is all available interfaces.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| grpc-port                                            | 5567                                |                      |                      | The (localhost) port where the proxy gRPC server binds to. Used for communicating with xroad-signer and xroad-monitor.                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| server-conf-cache-period                             | 60                                  |                      |                      | Number of seconds to keep selected serverconf configuration items in memory                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| server-conf-client-cache-size                        | 100                                 |                      |                      | Maximum number of local clients to keep cached                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| server-conf-service-cache-size                       | 1000                                |                      |                      | Maximum number of services to keep cached                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| server-conf-acl-cache-size                           | 100000                              |                      |                      | Maximum number of access rights to keep cached in memory.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| server-conf-service-endpoints-cache-size             | 100000                              |                      |                      | Maximum number of service endpoints to keep cached in memory.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| enforce-client-is-cert-validity-period-check         | false                               |                      |                      | Whether to reject a request when client information system certificate is expired or not yet valid.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| backup-encryption-enabled                            | false                               |                      |                      | Whether to encrypt security server backup files using server's OpenPGP key.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| backup-encryption-keyids                             |                                     |                      |                      | Comma-separated list of additional recipient OpenPGP key identifiers.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| server-min-supported-client-version                  |                                     |                      |                      | Minimum version of the client Security Server that is allowed to access a service. This property must be configured on the service provider Security Server.                                                                                                                                                                                                                                                                                                                                                                                                                         |
| log-client-cert                                      | false                               |                      |                      | Whether to log client certificate subject information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| memory-usage-threshold                               |                                     |                      |                      | Maximum allowed percentage (between 0-100) of the maximum Proxy memory being used before the health check starts failing.                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

Note about `database-properties` file: Management REST API module uses the same database-properties file, but
limits the configuration parameters usage:

- `hibernate.dialect` cannot be changed, it is fixed to a custom PostgreSQL dialect.
- out of `hibernate.connection.*` parameters, only `url`, `username` and `password` can be configured.

This in practice limits configurability to different kinds of PostgreSQL database configurations, and it is not possible
to use for example MySQL as a data store for REST API module.

### 3.3 Proxy User Interface parameters: `[proxy-ui]`

Proxy-ui has been removed in version 6.24 and it's parameters are not used anymore.

[proxy-ui-api](#39-management-rest-api-parameters-proxy-ui-api) parameters replace the old `[proxy-ui]` parameters.
### 3.7 Message log add-on parameters: `[message-log]`

| **Parameter**                                    | **Default value**    | **FI-package value** |  **EE-package value** | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------|----------------------|----------------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| message-body-logging                             | true                 | false                |                       |  Whether message body should be logged or not.<br/><br/>If *true*, the messages are logged in their original form. If *false*, the message body is cleared of its contents (SOAP body will have an empty child element inside it; REST message body, service path and query parameters will be omitted). In addition, the SOAP header and REST HTTP headers will only have specific set of elements logged, see [Note on logged X-Road message headers](#note-on-logged-x-road-message-headers) . As a side effect, details such as formatting and namespace labels of the xml message can be changed and new elements may be introduced for default values in SOAP header.<br/><br/>Removal of message body is usually done for confidentiality reasons (body contains data that we do not want to have in the logs).<br/><br/>Note that changing the message this way prevents verifying its signature with the asicverifier tool. |
| soap-body-logging                                | true                 | false                |                       | (deprecated, see message-body-logging)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 
| enabled-body-logging-local-producer-subsystems   |                      |                      |                       |  Subsystem-specific overrides for message body logging when message-body-logging = false.<br/><br/>This parameter defines logging for **local producer** subsystems, that is, our subsystems that produce some service which external clients use.<br/><br/>Comma-separated list of client identifiers for which message body logging is enabled. For example FI/ORG/1710128-9/SUBSYSTEM\_A1, FI/ORG/1710128-9/SUBSYSTEM\_A2 where<br/>-   FI = x-road instance<br/>-   ORG = member class<br/>-   1710128-9 = member code<br/>-   SUBSYSTEM\_A1 = subsystem code<br/><br/>This parameter can only be used on subsystem-level, it is not possible to configure message body logging per member.<br/><br/>If a subsystem has forward slashes “/” in for example subsystem code, those subsystems can’t be configured with this parameter.                                                                                             |
| enabled-body-logging-remote-producer-subsystems  |                      |                      |                       |  Subsystem-specific overrides for **remote producer** subsystems, that is, remote subsystems that produce services which we use.<br/><br/>Parameter is used when message-body-logging = false.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| disabled-body-logging-local-producer-subsystems  |                      |                      |                       |  Same as enabled-body-logging-local-producer-subsystems, but this parameter is used when message-body-logging = true.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| disabled-body-logging-remote-producer-subsystems |                      |                      |                       |  Same as enabled-body-logging-remote-producer-subsystems, but this parameter is used when message-body-logging = true.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| acceptable-timestamp-failure-period              | 14400                | 172800               |                       |  Defines the time period (in seconds) for how long is time-stamping allowed to fail (for whatever reasons) before the message log stops accepting any more messages (and consequently the security server stops accepting requests). Set to 0 to disable this check. The value of this parameter should not be lower than the value of the central server system parameter *timeStampingIntervalSeconds.*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| archive-interval                                 | 0 0 0/6 1/1 \* ? \*  |                      |                       |  CRON expression \[[CRON](#Ref_CRON)\] defining the interval of archiving the time-stamped messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| archive-max-filesize                             | 33554432             |                      |                       |  Maximum size for archived files in bytes. Reaching the maximum value triggers file rotation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| archive-path                                     | /var/lib/xroad       |                      |                       |  Absolute path to the directory where time-stamped log records are archived.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| clean-interval                                   | 0 0 0/12 1/1 \* ? \* |                      |                       |  CRON expression \[[CRON](#Ref_CRON)\] for deleting any time-stamped and archived records that are older than *message-log.keep-records-for* from the database.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| hash-algo-id                                     | SHA-512              |                      |                       |  The algorithm identifier used for hashing in the message log.<br/>Possible values are<br/>-   SHA-224,<br/>-   SHA-256,<br/>-   SHA-384,<br/>-   SHA-512.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| keep-records-for                                 | 30                   |                      |                       |  Number of days to keep time-stamped and archived records in the database of the security server. If a time-stamped and archived message record is older than this value, the record is deleted from the database.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| timestamp-immediately                            | false                |                      |                       |  If true, the time-stamp is created synchronously for each request message. This is a security policy requirement to guarantee the time-stamp at the time of logging the message.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| timestamp-records-limit                          | 10000                |                      |                       | Maximum number of message records to time-stamp in one batch. If the number of message records in a single batch exceeds 70 % of `timestamp-records-limit` value, a warning is logged in `proxy.log`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| timestamper-client-connect-timeout               | 20000                |                      |                       |  The timestamper client connect timeout in milliseconds. A timeout of zero is interpreted as an infinite timeout.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| timestamper-client-read-timeout                  | 60000                |                      |                       |  The timestamper client read timeout in milliseconds. A timeout of zero is interpreted as an infinite timeout.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| timestamp-retry-delay                            | 60                   |                      |                       | Time-stamp retry delay in seconds when batch time-stamping fails. After failing to batch time-stamp, the timestamper waits for the time period defined by "timestamp-retry-delay" before trying again. This is repeated until fetching a time-stamp succeeds. After successfully fetching a time-stamp, the timestamper returns to normal time-stamping schedule. If the value of "timestamp-retry-delay" is higher than the value of the central server system parameter "timeStampingIntervalSeconds", the value of "timeStampingIntervalSeconds" is used. If the value of "timestamp-retry-delay" is zero, the value of "timeStampingIntervalSeconds" is used.                                                                                                                                                                                                                                                                    |
| archive-transaction-batch                        | 10000                |                      |                       |  Size of transaction batch for archiving messagelog. This size is not exact because it will always make sure that last archived batch includes timestamp also (this might mean that it will go over transaction size).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| max-loggable-message-body-size                   | 10485760 (10 MiB)    |                      | 20971520 (20MiB)      | Maximum loggable REST message body size                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| truncated-body-allowed                           | false                |                      |                       | If the REST message body exceeds the maximum loggable body size, truncate the body in the log (true) or reject the message (false).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| clean-transaction-batch                          | 10000                |                      |                       | Maximun number of log records to remove in one transaction.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| archive-grouping                                 | none                 |                      |                       | Archive file grouping, one of 'none', 'member' (group by member), 'subsystem' (group by subsystem).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| archive-transfer-command                         |                      |                      |                       | A command that is executed after the (periodic) archiving process e.g. to transfer archive files automatically from the security server. Defaults to no operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| archive-encryption-enabled                       | false                |                      |                       | If true, archive files are encrypted using OpenPGP (GnuPG)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| archive-gpg-home-directory                       | /etc/xroad/gpghome   |                      |                       | GPG home for archive file signing (and default encryption) keys                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| archive-encryption-keys-config                   |                      |                      |                       | Configuration file for member identifier to OpenPGP key id mapping. Per-member keys can be used when grouping is by 'member' or 'subsystem' (subsystems use the member's key). See \[[UG-SS](#Ref_UG_SS)\] for details.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| archive-default-encryption-key                   |                      |                      |                       | Default OpenPGP key id for archive encryption (if not defined, the primary encryption key is used)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| messagelog-encryption-enabled                    | false                |                      |                       | If true, message bodies are stored to the database in an encrypted format                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| messagelog-keystore                              |                      |                      |                       | Path to the keystore containing the key used in messagelog encryption                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| messagelog-keystore-password                     |                      |                      |                       | Messagelog keystore password                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| messagelog-key-id                                |                      |                      |                       | Identifier of the messagelog encryption key                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |